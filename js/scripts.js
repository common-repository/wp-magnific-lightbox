jQuery(document).ready(function($){tinymce.create('tinymce.plugins.mfcButton',{init:function(ed,url){ed.addButton('grid',{title:'WP Magnific Lightbox',image:url+'/mfc.png',onclick:function(){ed.windowManager.open({title:'Magnific Popup Options',width:350,height:250,body:[{type:'listbox',name:'type',label:'Popup Type',id:'popup_type','values':[{text:'Image',value:'image'},{text:'Video',value:'video'},{text:'Map',value:'map'}]},{type:'textbox',name:'video_url',label:'Video Url',classes:'video_url',id:'video_url',placeholder:'https://www.youtube.com/watch?v=hwjcRzKnVks',},{type:'textbox',name:'google_map',label:'Google Map Url',classes:'google_map',placeholder:'Your Address',id:'google_map'},{type:'textbox',name:'clickable_text',label:'Clickable Text',classes:'clickable_text',placeholder:'Click Here',id:'clickable_text'},{type:'textbox',name:'url',label:'Media Url',classes:'media_url',id:'media_url',disabled:"disabled"},{type:'button',name:'select-file',text:'Upload File',onclick:function(){window.mb=window.mb||{};window.mb.frame=wp.media({library:{type:'image'},multiple:false});window.mb.frame.on('select',function(){var json=window.mb.frame.state().get('selection').first().toJSON();if(0>$.trim(json.url.length)){return;}
jQuery('#media_url').val(json.url);});window.mb.frame.open();}}],onsubmit:function(e){switch(e.data.type){case'image':ed.selection.setContent('[wp_mfc_lightbox type="image" clickable_text="'+e.data.clickable_text+'" url="'+e.data.url+'"]');break;case'video':ed.selection.setContent('[wp_mfc_lightbox type="video" clickable_text="'+e.data.clickable_text+'" url="'+e.data.video_url+'"]');break;case'map':ed.selection.setContent('[wp_mfc_lightbox type="map" clickable_text="'+e.data.clickable_text+'" google_map="'+e.data.google_map+'"]');break;}}});}});},createControl:function(n,cm){return null;}});tinymce.PluginManager.add('mfc_scripts',tinymce.plugins.mfcButton);});